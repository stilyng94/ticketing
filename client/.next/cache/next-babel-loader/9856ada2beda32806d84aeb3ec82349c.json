{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sayetech/freelance/ticketing/client/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/sayetech/freelance/ticketing/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/sayetech/freelance/ticketing/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sayetech/freelance/ticketing/client/hooks/use-request.js\",\n    _this = this;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from \"react\";\nimport axios from \"axios\";\n\nvar useRequest = /*#__PURE__*/function () {\n  var _s = $RefreshSig$();\n\n  var _ref2 = _asyncToGenerator(_s( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref) {\n    var url, method, body, onSuccess, _useState, errors, setErrors, doRequest;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _s();\n\n            url = _ref.url, method = _ref.method, body = _ref.body, onSuccess = _ref.onSuccess;\n            _useState = useState(null), errors = _useState[0], setErrors = _useState[1];\n\n            doRequest = /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                var _yield$axios$method, data, _errors;\n\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        setErrors(null);\n                        _context.prev = 1;\n                        _context.next = 4;\n                        return axios[method](url, _objectSpread({}, body));\n\n                      case 4:\n                        _yield$axios$method = _context.sent;\n                        data = _yield$axios$method.data;\n\n                        if (onSuccess) {\n                          onSuccess(data);\n                        }\n\n                        _context.next = 13;\n                        break;\n\n                      case 9:\n                        _context.prev = 9;\n                        _context.t0 = _context[\"catch\"](1);\n                        _errors = _context.t0.response.data;\n                        setErrors( /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"alert alert-danger\",\n                          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                            children: \"Oooops....\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 20,\n                            columnNumber: 11\n                          }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                            className: \"my-0\",\n                            children: _errors.map(function (error, index) {\n                              return /*#__PURE__*/_jsxDEV(\"li\", {\n                                children: \"error.message\"\n                              }, error.index, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 23,\n                                columnNumber: 15\n                              }, _this);\n                            })\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 21,\n                            columnNumber: 11\n                          }, _this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 19,\n                          columnNumber: 9\n                        }, _this));\n\n                      case 13:\n                        return _context.abrupt(\"return\");\n\n                      case 14:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee, null, [[1, 9]]);\n              }));\n\n              return function doRequest() {\n                return _ref3.apply(this, arguments);\n              };\n            }();\n\n            return _context2.abrupt(\"return\", {\n              errors: errors,\n              doRequest: doRequest\n            });\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }), \"CBiIfGMAaAtFFE/cKx87b00YZJU=\"));\n\n  return function useRequest(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default useRequest;","map":{"version":3,"sources":["/Users/sayetech/freelance/ticketing/client/hooks/use-request.js"],"names":["useState","axios","useRequest","url","method","body","onSuccess","errors","setErrors","doRequest","data","response","map","error","index"],"mappings":";;;;;;;;;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,IAAMC,UAAU;AAAA;;AAAA,0EAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAASC,YAAAA,GAAT,QAASA,GAAT,EAAcC,MAAd,QAAcA,MAAd,EAAsBC,IAAtB,QAAsBA,IAAtB,EAA4BC,SAA5B,QAA4BA,SAA5B;AAAA,wBACWN,QAAQ,CAAC,IAAD,CADnB,EACVO,MADU,iBACFC,SADE;;AAGXC,YAAAA,SAHW;AAAA,mFAGC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAChBD,wBAAAA,SAAS,CAAC,IAAD,CAAT;AADgB;AAAA;AAAA,+BAGSP,KAAK,CAACG,MAAD,CAAL,CAAcD,GAAd,oBAClBE,IADkB,EAHT;;AAAA;AAAA;AAGNK,wBAAAA,IAHM,uBAGNA,IAHM;;AAMd,4BAAIJ,SAAJ,EAAe;AACbA,0BAAAA,SAAS,CAACI,IAAD,CAAT;AACD;;AARa;AAAA;;AAAA;AAAA;AAAA;AAURH,wBAAAA,OAVQ,GAUC,YAAMI,QAAN,CAAeD,IAVhB;AAWdF,wBAAAA,SAAS,eACP;AAAK,0BAAA,SAAS,EAAC,oBAAf;AAAA,kDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADF,eAEE;AAAI,4BAAA,SAAS,EAAC,MAAd;AAAA,sCACGD,OAAM,CAACK,GAAP,CAAW,UAACC,KAAD,EAAQC,KAAR;AAAA,kDACV;AAAA;AAAA,iCAASD,KAAK,CAACC,KAAf;AAAA;AAAA;AAAA;AAAA,uCADU;AAAA,6BAAX;AADH;AAAA;AAAA;AAAA;AAAA,mCAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iCADO,CAAT;;AAXc;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHD;;AAAA,8BAGXL,SAHW;AAAA;AAAA;AAAA;;AAAA,8CA4BV;AAAEF,cAAAA,MAAM,EAANA,MAAF;AAAUE,cAAAA,SAAS,EAATA;AAAV,aA5BU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAVP,UAAU;AAAA;AAAA;AAAA,GAAhB;;AA+BA,eAAeA,UAAf","sourcesContent":["import { useState } from \"react\";\nimport axios from \"axios\";\n\nconst useRequest = async ({ url, method, body, onSuccess }) => {\n  const [errors, setErrors] = useState(null);\n\n  const doRequest = async () => {\n    setErrors(null);\n    try {\n      const { data } = await axios[method](url, {\n        ...body,\n      });\n      if (onSuccess) {\n        onSuccess(data);\n      }\n    } catch (error) {\n      const errors = error.response.data;\n      setErrors(\n        <div className=\"alert alert-danger\">\n          <h4>Oooops....</h4>\n          <ul className=\"my-0\">\n            {errors.map((error, index) => (\n              <li key={error.index}>error.message</li>\n            ))}\n          </ul>\n        </div>\n      );\n    }\n    return;\n  };\n\n  return { errors, doRequest };\n};\n\nexport default useRequest;\n"]},"metadata":{},"sourceType":"module"}